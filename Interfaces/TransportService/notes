2.3 üöÄ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ —Å –∫–æ–º–ø–æ–∑–∏—Ü–∏–µ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
  –¶–µ–ª—å –∑–∞–¥–∞–Ω–∏—è:
–û—Å–≤–æ–∏—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø—ã –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤, —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (ISP –∏–∑ SOLID) –∏ –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º–∞ –≤ Go. –ù–∞—É—á–∏—Ç—å—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –≥–∏–±–∫–∏–µ —Å–∏—Å—Ç–µ–º—ã, –≥–¥–µ –æ–±—ä–µ–∫—Ç—ã –º–æ–≥—É—Ç –∏–º–µ—Ç—å —Ä–∞–∑–Ω—ã–π –Ω–∞–±–æ—Ä –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π.
  üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
1. –ë–∞–∑–æ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (Atomic Interfaces)
  // Mover - –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ
    type Mover interface {
        Move()
        Stop()
        IsMoving() bool
    }

    // Fueler - –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ä–∞–±–æ—Ç—É —Å –∂–∏–¥–∫–∏–º —Ç–æ–ø–ª–∏–≤–æ–º
    type Fueler interface {
        Refuel(amount float64) error
        GetFuelLevel() float64
        GetTankCapacity() float64
    }

    // Charger - –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ä–∞–±–æ—Ç—É —Å —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–π —ç–Ω–µ—Ä–≥–∏–µ–π
    type Charger interface {
        Charge(energy float64) error
        GetBatteryLevel() float64
        GetBatteryCapacity() float64
    }

    // Locatable - –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è
    type Locatable interface {
        GetLocation() float64
        GetDistanceTraveled() float64
    }
2. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (Composed Interfaces)
    // FuelVehicle - —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –Ω–∞ –∂–∏–¥–∫–æ–º —Ç–æ–ø–ª–∏–≤–µ
    type FuelVehicle interface {
        Mover
        Fueler
        Locatable
    }

    // ElectricVehicle - —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç
    type ElectricVehicle interface {
        Mover
        Charger
        Locatable
    }

    // HybridVehicle - –≥–∏–±—Ä–∏–¥–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç
    type HybridVehicle interface {
        Mover
        Fueler
        Charger
        Locatable
    }
üöó –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤
3. –†–µ–∞–ª–∏–∑—É–π 3 —Ç–∏–ø–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞:
Car (—Ä–µ–∞–ª–∏–∑—É–µ—Ç FuelVehicle)
  * –¢–æ–ø–ª–∏–≤–æ: –±–µ–Ω–∑–∏–Ω/–¥–∏–∑–µ–ª—å
  * –ü–æ–ª—è: model, fuelLevel, tankCapacity, fuelConsumption, location, distanceTraveled
  * –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: —Ç–æ–ª—å–∫–æ –î–í–°
ElectricScooter (—Ä–µ–∞–ª–∏–∑—É–µ—Ç ElectricVehicle)
  * –¢–æ–ø–ª–∏–≤–æ: —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ
  * –ü–æ–ª—è: model, batteryLevel, batteryCapacity, energyConsumption, location, distanceTraveled
  * –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: —Ç–æ–ª—å–∫–æ —ç–ª–µ–∫—Ç—Ä–æ–¥–≤–∏–≥–∞—Ç–µ–ª—å
HybridCar (—Ä–µ–∞–ª–∏–∑—É–µ—Ç HybridVehicle)
  * –¢–æ–ø–ª–∏–≤–æ: –±–µ–Ω–∑–∏–Ω + —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ
  * –ü–æ–ª—è: model, fuelLevel, tankCapacity, batteryLevel, batteryCapacity, fuelConsumption, energyConsumption, location, distanceTraveled
  * –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ —ç–Ω–µ—Ä–≥–∏–∏
üõ†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ TransportService
4. –°–µ—Ä–≤–∏—Å –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å:
    type TransportService struct {
        logger *log.Logger
    }

    func (ts *TransportService) TestDrive(mover Mover, distance int) error
    // –ü—Ä–æ–≤–æ–¥–∏—Ç —Ç–µ—Å—Ç-–¥—Ä–∞–π–≤ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
    // - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
    // - –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ —Ç–æ–ø–ª–∏–≤–æ/—ç–Ω–µ—Ä–≥–∏—é
    // - –°–∏–º—É–ª–∏—Ä—É–µ—Ç –ø–æ–µ–∑–¥–∫—É —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è
    // - –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ —ç—Ç–∞–ø—ã

    func (ts *TransportService) Refuel(vehicle interface{}, amount float64) error
    // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∑–∞–ø—Ä–∞–≤–∫–∞ - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–º, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–º Fueler

    func (ts *TransportService) Charge(vehicle interface{}, energy float64) error  
    // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∑–∞—Ä—è–¥–∫–∞ - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–º, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–º Charger

    func (ts *TransportService) GetVehicleInfo(vehicle interface{}) string
    // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –µ–≥–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
üéØ –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ main()
5. –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π —Å–∏—Å—Ç–µ–º—ã:
    func main() {
        service := NewTransportService()
        
        // –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
        vehicles := []interface{}{
            NewCar("Toyota Camry", 60, 8.5),
            NewElectricScooter("Xiaomi Pro", 0.5, 1.5),
            NewHybridCar("Toyota Prius", 45, 1.3, 5.2),
        }
        
        // –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º–∞
        for _, vehicle := range vehicles {
            // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
            service.ProcessVehicle(vehicle)
            
            // –¢–µ—Å—Ç-–¥—Ä–∞–π–≤ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
            service.TestDriveIfPossible(vehicle, 50)
        }
        
        // –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
        electricCar := NewElectricCar("Tesla Model 3", 75, 15.0)
        service.ProcessVehicle(electricCar)
    }
üí° –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏ —Ä–µ—à–µ–Ω–∏—è
6. –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
  ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–º–ø–æ–∑–∏—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
  ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—É ISP (–Ω–µ—Ç "–∂–∏—Ä–Ω—ã—Ö" –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤)
  ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —á–µ—Ä–µ–∑ type assertion/type switch
  ‚úÖ –ì–∏–±–∫–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
  ‚úÖ –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
7. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
  ‚≠ê –£–º–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏ –≥–∏–±—Ä–∏–¥–æ–º
  ‚≠ê –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ —Ç–æ–ø–ª–∏–≤–∞, –¥–≤–∏–∂–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è –∑–∞—Ä—è–¥–∫–∏)
  ‚≠ê –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π
  ‚≠ê –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã
8. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã:
  1. –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –Ω—É–∂–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å?
  2. –ö–∞–∫–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–∞—ë—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ atomic interfaces?
  3. –ö–∞–∫ –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å interface{}?
  4. –ö–æ–≥–¥–∞ —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–∑–∏—Ü–∏—é –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤, –∞ –∫–æ–≥–¥–∞ ‚Äî –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ?
9. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã:
  1. –ö–∞–∫ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Å–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—Ö–æ–¥ —ç–Ω–µ—Ä–≥–∏–∏ –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç-–¥—Ä–∞–π–≤–∞?
  2. –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–æ–µ—Ö–∞—Ç—å –≤—Å—ë —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ?
  3. –ö–∞–∫ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤–æ–¥–Ω–æ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞?